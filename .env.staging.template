# Unara Travel API - Staging Environment Configuration
# Copy this file to .env.staging and fill in the actual values

# ===========================================
# APPLICATION CONFIGURATION
# ===========================================
NODE_ENV=staging
PORT=3000
API_PREFIX=api

# Application Info
APP_NAME=Unara Travel API (Staging)
APP_VERSION=1.0.0-staging

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# Staging database connection
DB_HOST=staging-db-host
DB_PORT=5432
DB_NAME=unara_staging
DB_USERNAME=unara_staging_user
DB_PASSWORD=staging-database-password

# Connection pool settings (smaller for staging)
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_CONNECTION_TIMEOUT=5000
DB_IDLE_TIMEOUT=30000

# ===========================================
# JWT AUTHENTICATION CONFIGURATION
# ===========================================
# Use different key than production
JWT_SECRET=staging-jwt-secret-different-from-production
JWT_EXPIRES_IN=30m  # Longer for testing
JWT_REFRESH_EXPIRES_IN=7d

# ===========================================
# SECURITY CONFIGURATION
# ===========================================
# CORS Configuration (more permissive for testing)
CORS_ORIGINS=https://staging.your-domain.com,http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# Rate Limiting (more permissive for testing)
RATE_LIMIT_SHORT_TTL=1000
RATE_LIMIT_SHORT_LIMIT=50
RATE_LIMIT_MEDIUM_TTL=10000
RATE_LIMIT_MEDIUM_LIMIT=500
RATE_LIMIT_LONG_TTL=60000
RATE_LIMIT_LONG_LIMIT=5000

# ===========================================
# LOGGING AND MONITORING
# ===========================================
LOG_LEVEL=debug
LOG_FORMAT=pretty
LOG_FILE_PATH=/var/log/unara-api-staging/

# APM (if using separate staging instance)
APM_ENABLED=true
APM_SERVER_URL=staging-apm-server-url
APM_SECRET_TOKEN=staging-apm-secret-token
APM_ENVIRONMENT=staging

# Metrics collection
METRICS_ENABLED=true
METRICS_PORT=9090

# ===========================================
# EXTERNAL SERVICES (Staging/Test services)
# ===========================================
# Email Service (use test SMTP service)
SMTP_HOST=staging-smtp-host
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=staging-smtp-user
SMTP_PASS=staging-smtp-password
FROM_EMAIL=staging@your-domain.com
FROM_NAME=Unara Travel (Staging)

# File Storage (staging bucket)
STORAGE_ENABLED=true
STORAGE_ENDPOINT=https://s3.your-region.amazonaws.com
STORAGE_BUCKET=unara-staging-assets
STORAGE_ACCESS_KEY=staging-s3-access-key
STORAGE_SECRET_KEY=staging-s3-secret-key
STORAGE_REGION=us-east-1

# Redis (staging instance)
REDIS_ENABLED=true
REDIS_HOST=staging-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=staging-redis-password
REDIS_DB=1
REDIS_KEY_PREFIX=unara:staging:

# ===========================================
# FEATURE FLAGS (Enable all for testing)
# ===========================================
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_PASSWORD_RESET=true
FEATURE_TRIP_SHARING=true
FEATURE_PUBLIC_TRIPS=true
FEATURE_ANALYTICS=true

# ===========================================
# DEVELOPMENT AND DEBUG (Enabled for staging)
# ===========================================
# API Documentation (enabled for testing)
SWAGGER_ENABLED=true
SWAGGER_PATH=/api/docs

# Debug settings
DEBUG=true
VERBOSE_LOGGING=true

# ===========================================
# THIRD-PARTY INTEGRATIONS (Test accounts)
# ===========================================
# Error tracking (Sentry staging)
SENTRY_ENABLED=true
SENTRY_DSN=staging-sentry-dsn
SENTRY_ENVIRONMENT=staging
SENTRY_RELEASE=1.0.0-staging

# Analytics (test account)
ANALYTICS_ENABLED=true
ANALYTICS_API_KEY=staging-analytics-api-key

# ===========================================
# TESTING CONFIGURATION
# ===========================================
# Test user accounts
TEST_USER_EMAIL=test@staging.your-domain.com
TEST_USER_PASSWORD=staging-test-password

# Automated testing
AUTOMATED_TESTS_ENABLED=true
SEED_TEST_DATA=true

# Performance testing
LOAD_TEST_ENABLED=true
MAX_CONCURRENT_CONNECTIONS=100

# ===========================================
# CONTAINER ORCHESTRATION (Smaller resources)
# ===========================================
CONTAINER_MEMORY_LIMIT=1Gi
CONTAINER_CPU_LIMIT=500m
REPLICA_COUNT=2

# ===========================================
# BACKUP AND MAINTENANCE
# ===========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 3 * * *  # Daily at 3 AM
BACKUP_RETENTION_DAYS=7
BACKUP_STORAGE_PATH=/staging-backups

MAINTENANCE_MODE=false

# ===========================================
# ENVIRONMENT VALIDATION
# ===========================================
VALIDATE_ENV=true
REQUIRED_ENV_VARS=DB_HOST,DB_PASSWORD,JWT_SECRET,SMTP_HOST